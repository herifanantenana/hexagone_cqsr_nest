[{"kind":1,"language":"markdown","value":"# User Profile Management\n\nUser profile operations: **Get Profile → Update Profile → Public Profile → Avatar Upload → Avatar Delete**\n\n**Base URL:** `http://localhost:3000`\n\n> **Prerequisite:** A user must exist. Run cells in order — step 1 creates the user and logs in.","outputs":[]},{"kind":1,"language":"markdown","value":"---\n## 0. Setup — Signup & Login\n\nCreate a test user and obtain an access token.","outputs":[]},{"kind":2,"language":"rest-book","value":"POST http://localhost:3000/auth/signup\nContent-Type: application/json\n\n{\n    \"email\": \"user-profile-test@example.com\",\n    \"password\": \"StrongP@ss123!\",\n    \"displayName\": \"Profile Tester\"\n}","outputs":[]},{"kind":2,"language":"rest-book","value":"let auth = POST http://localhost:3000/auth/login\nContent-Type: application/json\n\n{\n    \"email\": \"user-profile-test@example.com\",\n    \"password\": \"StrongP@ss123!\"\n}","outputs":[]},{"kind":1,"language":"markdown","value":"---\n## 1. Get My Profile — `@Can('user', 'read')`\n\nReturns the full profile of the currently authenticated user.\nRequires permission `user:read` (enforced by PermissionsGuard).\n\nExpected fields: `id`, `email`, `displayName`, `bio`, `avatarUrl`, `status`, `createdAt`, `updatedAt`.","outputs":[]},{"kind":2,"language":"rest-book","value":"let myProfile = GET http://localhost:3000/users/me\nAuthorization: Bearer $auth.data.accessToken","outputs":[]},{"kind":1,"language":"markdown","value":"---\n## 2. Get My Profile — No token (expect 401)\n\n`@Can('user', 'read')` requires a valid JWT. PermissionsGuard returns 401 when no token is present.","outputs":[]},{"kind":2,"language":"rest-book","value":"GET http://localhost:3000/users/me","outputs":[]},{"kind":1,"language":"markdown","value":"---\n## 3. Update My Profile — `@Can('user', 'update')`\n\nUpdate display name and bio.\nRequires permission `user:update` (enforced by PermissionsGuard).\n\nExpected: returns updated profile data.","outputs":[]},{"kind":2,"language":"rest-book","value":"let updatedProfile = PUT http://localhost:3000/users/me\nContent-Type: application/json\nAuthorization: Bearer $auth.data.accessToken\n\n{\n    \"displayName\": \"Profile Tester Updated\",\n    \"bio\": \"Software engineer passionate about clean architecture and CQRS patterns.\"\n}","outputs":[]},{"kind":1,"language":"markdown","value":"---\n## 4. Update Profile — Invalid data (expect 400)\n\nDisplay name too short (min 2 chars).","outputs":[]},{"kind":2,"language":"rest-book","value":"PUT http://localhost:3000/users/me\nContent-Type: application/json\nAuthorization: Bearer $auth.data.accessToken\n\n{\n    \"displayName\": \"A\"\n}","outputs":[]},{"kind":1,"language":"markdown","value":"---\n## 5. Get Public Profile\n\nAnyone can view a user's public profile (no auth required).\n\nExpected fields: `id`, `displayName`, `bio`, `avatarUrl`, `createdAt`.\n\n> Uses `$myProfile.data.id` from step 1.","outputs":[]},{"kind":2,"language":"rest-book","value":"GET http://localhost:3000/users/$myProfile.data.id","outputs":[]},{"kind":1,"language":"markdown","value":"---\n## 6. Get Public Profile — User not found (expect 404)\n\nNon-existent user ID should return 404.","outputs":[]},{"kind":2,"language":"rest-book","value":"GET http://localhost:3000/users/00000000-0000-0000-0000-000000000000","outputs":[]},{"kind":1,"language":"markdown","value":"---\n## 7. Verify updated profile\n\nConfirm the changes from step 3 are persisted.","outputs":[]},{"kind":2,"language":"rest-book","value":"GET http://localhost:3000/users/me\nAuthorization: Bearer $auth.data.accessToken","outputs":[]}]