[{"kind":1,"language":"markdown","value":"# Authentication Flow\n\nComplete authentication lifecycle: **Signup → Login → Refresh Token → Change Password → Logout**\n\n**Base URL:** `http://localhost:3000`\n\n> Run cells **in order** — each step depends on the previous one (variables are passed between cells).","outputs":[]},{"kind":1,"language":"markdown","value":"---\n## 1. Signup — Register a new user\n\nCreates a new account. Returns `{ userId, email, displayName }`.","outputs":[]},{"kind":2,"language":"rest-book","value":"let signupResponse = POST http://localhost:3000/auth/signup\nContent-Type: application/json\n\n{\n    \"email\": \"alice@example.com\",\n    \"password\": \"StrongP@ss123!\",\n    \"displayName\": \"Alice Dupont\"\n}","outputs":[]},{"kind":1,"language":"markdown","value":"---\n## 2. Signup — Duplicate email (expect 409 Conflict)\n\nAttempting to register the same email again should fail.","outputs":[]},{"kind":2,"language":"rest-book","value":"POST http://localhost:3000/auth/signup\nContent-Type: application/json\n\n{\n    \"email\": \"alice@example.com\",\n    \"password\": \"StrongP@ss123!\",\n    \"displayName\": \"Alice Dupont\"\n}","outputs":[]},{"kind":1,"language":"markdown","value":"---\n## 3. Signup — Weak password (expect 400 Bad Request)\n\nPassword must be at least 8 characters. This should fail validation.","outputs":[]},{"kind":2,"language":"rest-book","value":"POST http://localhost:3000/auth/signup\nContent-Type: application/json\n\n{\n    \"email\": \"bob@example.com\",\n    \"password\": \"123\",\n    \"displayName\": \"Bob\"\n}","outputs":[]},{"kind":1,"language":"markdown","value":"---\n## 4. Login — Valid credentials\n\nReturns `{ accessToken, refreshToken, expiresIn, tokenType }`.","outputs":[]},{"kind":2,"language":"rest-book","value":"let loginResponse = POST http://localhost:3000/auth/login\nContent-Type: application/json\n\n{\n    \"email\": \"alice@example.com\",\n    \"password\": \"StrongP@ss123!\"\n}","outputs":[]},{"kind":1,"language":"markdown","value":"---\n## 5. Login — Invalid credentials (expect 401 Unauthorized)\n\nWrong password should result in an authentication error.","outputs":[]},{"kind":2,"language":"rest-book","value":"POST http://localhost:3000/auth/login\nContent-Type: application/json\n\n{\n    \"email\": \"alice@example.com\",\n    \"password\": \"WrongPassword!\"\n}","outputs":[]},{"kind":1,"language":"markdown","value":"---\n## 6. Refresh Token\n\nUse the refresh token from login to get new access and refresh tokens.\n\n> Uses `$loginResponse.data.refreshToken` from step 4.","outputs":[]},{"kind":2,"language":"rest-book","value":"let refreshResponse = POST http://localhost:3000/auth/refresh\nContent-Type: application/json\n\n{\n    \"refreshToken\": \"$loginResponse.data.refreshToken\"\n}","outputs":[]},{"kind":1,"language":"markdown","value":"---\n## 7. Verify authenticated access with new token\n\nUse the refreshed access token to access a protected route (get my profile).\n\n> Uses `$refreshResponse.data.accessToken` from step 6.","outputs":[]},{"kind":2,"language":"rest-book","value":"GET http://localhost:3000/users/me\nAuthorization: Bearer $refreshResponse.data.accessToken","outputs":[]},{"kind":1,"language":"markdown","value":"---\n## 8. Change Password\n\nChange the user's password. Revokes all sessions.\n\n> Uses `$refreshResponse.data.accessToken` from step 6.","outputs":[]},{"kind":2,"language":"rest-book","value":"POST http://localhost:3000/auth/change-password\nContent-Type: application/json\nAuthorization: Bearer $refreshResponse.data.accessToken\n\n{\n    \"currentPassword\": \"StrongP@ss123!\",\n    \"newPassword\": \"NewStr0ngP@ss456!\"\n}","outputs":[]},{"kind":1,"language":"markdown","value":"---\n## 9. Login with new password\n\nAfter changing the password, login with the new credentials.","outputs":[]},{"kind":2,"language":"rest-book","value":"let newLoginResponse = POST http://localhost:3000/auth/login\nContent-Type: application/json\n\n{\n    \"email\": \"alice@example.com\",\n    \"password\": \"NewStr0ngP@ss456!\"\n}","outputs":[]},{"kind":1,"language":"markdown","value":"---\n## 10. Logout\n\nRevoke the current session. Returns 204 No Content.\n\n> Uses `$newLoginResponse.data.accessToken` from step 9.","outputs":[]},{"kind":2,"language":"rest-book","value":"POST http://localhost:3000/auth/logout\nAuthorization: Bearer $newLoginResponse.data.accessToken","outputs":[]},{"kind":1,"language":"markdown","value":"---\n## 11. Access after logout (expect 401 Unauthorized)\n\nAfter logout, the token should no longer work for protected routes.","outputs":[]},{"kind":2,"language":"rest-book","value":"GET http://localhost:3000/users/me\nAuthorization: Bearer $newLoginResponse.data.accessToken","outputs":[]}]